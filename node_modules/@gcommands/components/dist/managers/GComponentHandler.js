"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GComponentHandler=void 0;var _Constants=require("../util/Constants");class GComponentHandler{constructor(client,components){this.client=client;this.components=components;this.interactionEvent()}interactionEvent(){this.client.on("interactionCreate",async interaction=>{if(!interaction||!interaction.isMessageComponent())return;try{var _this$components$find;const regex=new RegExp("[A-Za-z0-9]+","gd");const args=interaction.customId.match(regex);const name=args.shift();const component=(_this$components$find=this.components.find(cmp=>{if(typeof cmp.name==="string")return cmp.name===interaction.customId;else if(cmp.name instanceof RegExp)return cmp.name.test(interaction.customId);else return false}))!==null&&_this$components$find!==void 0?_this$components$find:this.components.get(name);if(!component)return;if(component.type===_Constants.ComponentType.BUTTON&&!interaction.isButton())return;if(component.type===_Constants.ComponentType.SELECT_MENU&&!interaction.isSelectMenu())return;if(component.userRequiredPermissions[0]&&!interaction.memberPermissions.has(component.userRequiredPermissions))return interaction.deferReply();await component.run(interaction,args)}catch(e){this.client.emit(_Constants.Events.DEBUG,e)}})}}exports.GComponentHandler=GComponentHandler;